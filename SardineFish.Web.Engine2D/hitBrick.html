<!DOCTYPE HTML><html>    <head>        <title>Test</title><script src="jquery.min.js"></script>        <script src="SardineFish.Web.js"></script>        <script src="SardineFish.Web.Engine2D.js"></script>        <meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no,target-densitydpi=device-dpi" />        <meta name="apple-mobile-web-app-capable" content="yes" />        <meta name="browsermode" content="application" />        <meta name="full-screen" content="true" />        <meta name="x5-fullscreen" content="true" />        <meta name="x5-page-mode" content="app" />        <meta name="360-fullscreen" content="true" />        <style>            html{                -ms-touch-action: none;  /*Direct all pointer events to JavaScript code. */                overflow: hidden;            }            body{                margin: 0px;                padding: 0px;                background-color: rgb(240,240,240);            }            #debug{                display: block;                position: fixed;                 top: -10px;                left: 0px;                z-index: 1000;                color: red;            }            #pos{                display: block;                position: fixed;                float: left;            }        </style>    </head>    <body oncontextmenu="return false;"><!--        <a href="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js" download="jquery.min.js" >jquery.min.js</a>        -->        <p id="debug" >debug</p>        <p id="pos">0</p>        <div>            <canvas id="canvas" width="480" height="500"></canvas>            <div style="height: 200px; background-color:black"></div>        </div>                <script>try{//call SardineFish;//alert(Engine2D.Web);var width=0,height=0;var lastP=false;//alert(LinkList);var canvas=document.getElementById("canvas");Graphics.canvas = canvas;var lineList=new Array();var pList=[];var lastLine=false;var lastCol=false;var calcu=false;var O=false;var scene=new Scene;var game = new Game.createByCanvas(canvas);game.setScene(scene);var controlMan = null;var runing = false;var moving = false;var bullet=null;var board=null;scene.physics.g.y=360;scene.onClick=canvasClick0;scene.onDoubleClick=function(e){    //alert("");}var rect=new Rectangle(64,136);var walkAnimation;var standAnimation;var runAnimation;var crouchAnimation;var jumpAnimation;var down=false;function load(){    var w=width/10;    var h=height/3/6;    var brick=new Rectangle(w-1,h-1);    brick.soft=false;    brick.static=true;    brick.rigidBody=true;    for(var y=0;y<6;y++)    {        for(var x=0;x<10;x++)        {            var obj=new GameObject();            obj.collider=brick.copy();            obj.collider.setCenter(w*x,w*y,Align.topLeft);            obj.graphic=obj.collider;            obj.gravity=false;            obj.name="brick"+x+","+y;            scene.addGameObject(obj);        }    }    var wall =new Rectangle(10,height);    wall.rigidBody=true;    wall.static=true;    wall.soft=false;    var wo=new GameObject();    wo.collider=wall.copy();    wo.graphic=wo.collider;    wo.collider.setCenter(0,height,Align.bottomRight);    wo.gravity=false;    scene.addGameObject(wo);    wo=new GameObject();    wo.collider=wall.copy();    wo.graphic=wo.collider;    wo.collider.setCenter(width,height,Align.bottomLeft);    wo.gravity=false;    scene.addGameObject(wo);   }scene.onTouchStart=function(e){    try    {     //alert(e.touches[0]);        var p = new Point(e.touches[0].screenX, e.touches[0].screenY);        if(!board)        {            rect=new Rectangle(100,10);            rect.setCenter(p.x,p.y,Align.center);            rect.static=true;            rect.soft=false;            rect.rigidBody=true;            board=new GameObject();            board.position.x=p.x;            board.position.y=p.y;            board.collider=rect;            board.graphic=rect;            board.gravity=false;            scene.addGameObject(board);            rect=new Rectangle(5,5);            rect.setCenter(p.x,p.y-10,Align.center);            rect.rigidBody=true;            bullet=new GameObject();            bullet.collider=rect;            bullet.graphic=rect;            bullet.gravity=true;            bullet.v.y=-500;            scene.addGameObject(bullet);        }        down=true;            }    catch(ex)    {        alert("scene.onTouchStart:"+ex.message);    }}//scene.onMouseDownscene.onTouchMove=function(e){    try    {     //alert(e.touches[0]);        var p = new Point(e.touches[0].pageX, e.touches[0].pageY);        $("#pos").text(p.x+","+p.y);        board.moveTo(p.x,p.y);            }    catch(ex)    {        alert("scene.onTouchMove:"+ex.message);    }}scene.onMouseDown=function(e){    try    {        var p = new Point(e.pageX, e.pageY);        if(!board)        {            rect=new Rectangle(100,10);            rect.setCenter(p.x,p.y,Align.center);            rect.static=true;            rect.soft=false;            rect.rigidBody=true;            board=new GameObject();            board.collider=rect;            board.graphic=rect;            board.gravity=false;            scene.addGameObject(board);            rect=new Rectangle(5,5);            rect.setCenter(p.x,p.y-10,Align.center);            rect.rigidBody=true;            bullet=new GameObject();            bullet.collider=rect;            bullet.graphic=rect;            bullet.gravity=true;            bullet.v.y=-500;            scene.addGameObject(bullet);        }        down=true;    }    catch(ex)    {        alert("scene.onMouseDown:"+ex.message);    }}scene.onMouseUp=function(e){    try    {        var p = new Point(e.pageX, e.pageY);    }    catch(ex)    {        alert("scene.onMouseUp:"+ex.message);    }}scene.onMouseMove=function(e){    try    {        if(!down||!board)            return;        var p = new Point(e.pageX, e.pageY);        board.moveTo(p.x,p.y);    }    catch(ex)    {        alert("scene.onMouseMove:"+ex.message);    }}function canvasUp(e){    }function onUpdate(obj,delay){try{    obj.collider.drawToCanvas(canvas,0,0,delay);    }catch(ex){ alert("update:"+ex.message);}}function onRender(obj,delay){try{//alert();    obj.collider.drawToCanvas(canvas,0,0,delay);    }catch(ex){ alert("render:"+ex.message);}}function canvasClick0(e){try{    /*var ground=new Ground(height,height);      var g=ground.toGameObject();    scene.addGameObject(g);*/    scene.onClick=canvasClick;     }catch(ex){ alert("click0:"+ex.message);}//alert(obj.name);}function canvasClick(e){    try    {        var p = new Point(e.pageX, e.pageY);            var obj = new GameObject();        obj.graphic = standAnimation.copy();        obj.collider=rect.copy();        obj.collider.setCenter(p.x, p.y, Align.bottomCenter);        obj.collider.rigidBody=true;        obj.collider.bounce=0;        //obj.collider.soft=false;        obj.graphic.setCenter(p.x, p.y, Align.bottomCenter);        obj.setCenter(p.x, p.y);        obj.name = "animation";        obj.onUpdate = onUpdate;        obj.onRender=onRender;        obj.mass=1;        //obj.gravity=false;        //obj.collider.static=true;        obj.v.x=controlMan.position.x-obj.position.x;        obj.v.y=controlMan.position.y-obj.position.y;        scene.addGameObject(obj);        obj.name = "animation" + obj.id;        controlMan=obj;    }catch(ex){alert(ex.message);}}function resize(){    width=screen.availWidth;    height =screen.availHeight;//alert("("+width+","+height+")");    $("body").css("width",width.toString()+"px");    document.getElementById("canvas").width=width;    document.getElementById("canvas").height=height;    load();}resize();window.onload=function(e){    try    {        walkAnimation = new ImageAnimation();        walkAnimation = ImageAnimation.loadFromUrl("walk.png", 0, 0, 160, 350,64,140, 18, 30, function ()        {        });        standAnimation = ImageAnimation.loadFromUrl("stand.png", 0, 0, 160, 350, 64, 140, 1, 1);        runAnimation = ImageAnimation.loadFromUrl("run.png", 0, 0, 260, 340, 104, 136, 27, 20, function () { runAnimation.loop.from = 13;});        runAnimation.loop.from = 12;        crouchAnimation = ImageAnimation.loadFromUrl("crouch.png", 0, 0, 200, 340, 80, 136, 11, 30, function ()        {            crouchAnimation.loop.enable = false;        });        jumpAnimation = ImageAnimation.loadFromUrl("jump.png", 0, 0, 220, 350, 88, 140, 11, 30, function ()        {            jumpAnimation.loop.enable = false;        });    var ctx=document.getElementById("canvas").getContext("2d");    //alert(ctx);    ctx.fillRect(0,0,width,height);        $("#canvas").mouseup(canvasUp);    SardineFish.Web.Engine2D.debug.write=function(text)    {//alert(text);        $("#debug").text(text);    }    SardineFish.Web.Engine2D.debug.clear=function()    {        $("#debug").text("");    }    game.start();}catch(ex){alert("onLoaded:"+ex.message);}}}catch(ex){    alert("global:"+ex.message);}        </script>    </body></html>